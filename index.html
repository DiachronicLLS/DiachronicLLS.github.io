<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>图文标记</title>
  </head>
  <script
    charset="utf-8"
    src="https://map.qq.com/api/gljs?v=1.exp&key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77"
  ></script>
  <style type="text/css">
    html,
    body {
      height: 100%;
      margin: 0px;
      padding: 0px;
    }

    #container {
      width: 100%;
      height: 100%;
    }
  </style>

  <body onload="initMap()">
    <div id="container"></div>
    <script>
      var map;
      function initMap() {
        var center = new TMap.LatLng(31.21796,121.46132);

        // 初始化地图
        map = new TMap.Map('container', {
          zoom: 13, // 设置地图缩放级别
          pitch: 30,
          center: center, // 设置地图中心点坐标
          // mapStyleId: "style1", //个性化样式   
        });

        // marker文字在图片外  MultiMarker文档地址：https://lbs.qq.com/webApi/javascriptGL/glDoc/glDocMarker
        new TMap.MultiMarker({
          map: map, // 显示Marker图层的底图
          styles: {
            small: new TMap.MarkerStyle({
              // 点标注的相关样式
              width: 34, // 宽度
              height: 46, // 高度
              anchor: { x: 17, y: 23 }, // 标注点图片的锚点位置
              src: 'https://mapapi.qq.com/web/lbs/visualizationApi/demo/img/small.png', // 标注点图片url或base64地址
              color: '#333', // 标注点文本颜色
              size: 16, // 标注点文本文字大小
              direction: 'bottom', // 标注点文本文字相对于标注点图片的方位
              offset: { x: 0, y: 8 }, // 标注点文本文字基于direction方位的偏移属性
              strokeColor: '#fff', // 标注点文本描边颜色
              strokeWidth: 2, // 标注点文本描边宽度
            }),
            big: new TMap.MarkerStyle({
              width: 34,
              height: 46,
              anchor: { x: 36, y: 32 },
              src: 'https://mapapi.qq.com/web/lbs/visualizationApi/demo/img/big.png',
              color: '#fff',
              size: 18,
              direction: 'bottom',
              strokeColor: '#0000FF',
              offset: { x: 0, y: 10 },
              strokeWidth: 6,
            }),
          },
          enableCollision: true, // 开启碰撞
          geometries: [
            {
              styleId: 'big',
              position: new TMap.LatLng(31.21796,121.46132),
              content: '国泰电影院',
            },
            {
              styleId: 'big',
              position: new TMap.LatLng(31.218095,121.462503),
              content: 'HuaihaiM-人民照相馆-1980s',
            },
            {
              styleId: 'big',
              position: new TMap.LatLng(31.218271,121.462287),
              content: 'HuaihaiM-百灵洋行-1920s',
            },
          ],
        });
      }
    </script>
  </body>
</html>
